<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>Portla de Proveedores (Grupo Dominguis)</title>
        <meta name="description" content="Portal para proveedores del Grupo Dominguis" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- estilos básicos -->
        <link href="css/bootstrap.min.css" rel="stylesheet" />
        <link href="css/bootstrap-responsive.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="css/font-awesome.min.css" />
        <!--[if IE 7]>
        <link rel="stylesheet" href="css/font-awesome-ie7.min.css" />
        <![endif]-->

        <!-- page specific plugin styles -->

        <!-- ace styles -->
        <link rel="stylesheet" href="css/ace.min.css" />
        <link rel="stylesheet" href="css/ace-responsive.min.css" />
        <!--[if lt IE 9]>
        <link rel="stylesheet" href="css/ace-ie.min.css" />
        <![endif]-->
    </head>
    <body class="login-layout">

        <div class="container-fluid" id="main-container">
            <div id="main-content">
                <div class="row-fluid">
                    <div class="span12">
                        <div class="login-container">
                            <div class="row-fluid">
                                <div class="center">
                                    <h1>
                                        <i class="icon-briefcase green"></i> <span class="red">Portal</span> <span class="white">Proveedores</span>
                                    </h1>
                                    <h4 class="blue">&copy; Grupo Dominguis</h4>
                                </div>
                            </div>

                            <div class="space-6"></div>
                            <div class="row-fluid">
                                <div class="position-relative">
                                    <div id="login-box" class="visible widget-box no-border">
                                        <div class="widget-body">
                                            <div class="widget-main">
                                                <h4 class="header lighter bigger">
                                                    <i class="icon-coffee green"></i> Por favor, introduzca sus datos
                                                </h4>
                                                <div class="space-6"></div>
                                                <form>
                                                    <fieldset>
                                                        <label>
                                                            <span class="block input-icon input-icon-right">
                                                                <input type="text" class="span12" placeholder="Usuario" id="txtLogin" /> <i class="icon-user"></i>
                                                            </span>
                                                        </label>
                                                        <label>
                                                            <span class="block input-icon input-icon-right">
                                                                <input type="password" class="span12" placeholder="Contraseña" id="txtPassword" /> <i class="icon-lock"></i>
                                                            </span>
                                                        </label>
                                                        <div class="space"></div>
                                                        <div class="row-fluid">
                                                            <label class="span8">
                                                            </label>
                                                            <button class="span4 btn btn-small btn-primary" id="btnLogin">
                                                                <i class="icon-key"></i> Entrar
                                                            </button>
                                                        </div>
                                                    </fieldset>
                                                </form>
                                            </div><!--/widget-main-->

                                            <div class="toolbar center">
                                                <a href="#" onclick="show_box('forgot-box');
                                                   return false;" class="forgot-password-link">
                                                    <i class="icon-arrow-left"></i> He olvidado mi contraseña
                                                </a>
                                            </div>
                                        </div><!--/widget-body-->

                                    </div><!--/login-box-->

                                    <div id="forgot-box" class="widget-box no-border">
                                        <div class="widget-body">
                                            <div class="widget-main">
                                                <h4 class="header red lighter bigger">
                                                    <i class="icon-key"></i> Recuperar la contraseña
                                                </h4>

                                                <div class="space-6"></div>

                                                <p>
                                                    Introduzca su correo electrónico
                                                </p>
                                                <form>
                                                    <fieldset>
                                                        <label>
                                                            <span class="block input-icon input-icon-right">
                                                                <input type="email" class="span12" placeholder="Correo" /> <i class="icon-envelope"></i>
                                                            </span>
                                                        </label>

                                                        <div class="row-fluid">
                                                            <button onclick="return false;" class="span5 offset7 btn btn-small btn-danger">
                                                                <i class="icon-lightbulb"></i> Recuperar
                                                            </button>
                                                        </div>

                                                    </fieldset>
                                                </form>
                                            </div><!--/widget-main-->
                                            <div class="toolbar center">
                                                <a href="#" onclick="show_box('login-box');
                                                   return false;" class="back-to-login-link">
                                                    Regresar al login <i class="icon-arrow-right"></i>
                                                </a>
                                            </div>
                                        </div><!--/widget-body-->
                                    </div><!--/forgot-box-->
                                </div><!--/position-relative-->

                            </div>

                        </div>

                    </div><!--/span-->
                </div><!--/row-->
            </div>
        </div><!--/.fluid-container-->

        <!-- basic scripts -->
        <script src="js/jquery-1.9.1.min.js"></script>
        <script src="js/bootbox.min.js"></script>
        <script src="js/ari-general.js"></script>

        <!-- Parámetros de aplicación -->
        <script src="js/config.js"></script>

        <!-- inline scripts related to this page -->
        <script type="text/javascript">
            function show_box(id) {
                $('.widget-box.visible').removeClass('visible');
                $('#' + id).addClass('visible');
            }
        </script>
        <!-- Funciones de apoyo y de soporte llamadas en esta página --> 
        <script type="text/javascript">
            function login() {
                //
                console.log("-> login");
                // recogemos los valores desde los campos
                var login = $("#txtLogin").val();
                var password = $("#txtPassword").val();
                // solicitamos el tique a la API
                $.ajax({
                    type: "GET",
                    url: ari_hosts.webapi + "/api/Login?login=" + login + "&password=" + password,
                    dataType: "json",
                    contentType: "application/json",
                    success: function (data, textStatus) {
                        alert("success");
                        // recoger el codigo de tique asociado
                        var tique = data;
                        // guardar en la cookie correspondiente
                        setCookie("ari_tique", tique.Codigo, 1);
                    },
                    error: function (xhr, textStatus, errorThrwon) {
                        console.log("->AJAX ERROR");
                        bootbox.dialog("Mensaje", [
                            {
                                label: "OK",
                                class: "btn-small btn-primary"
                            }
                        ]);
                    }
                });
            }
        </script>

        <!-- A ejecutar una vez cargados todos los elementos -->
        <script type="text/javascript">
                (function ($) {
                    $(document).ready(function () {
                        console.log("-> DOCUMENT.READY");
                        // asignar eventos a botones 
                        $("#btnLogin").click(login);
                    });
                })(jQuery);
        </script>
    </body>
</html>
